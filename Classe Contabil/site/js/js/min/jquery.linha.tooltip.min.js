//Linha Tooltip
(function($){$.fn.tooltip=function(options){return new $.tooltip(options,this);};$.tooltip=function(options,elem){var padrao={seletor:'.tooltip',seletor_imagem:'imagem',seletor_ajax:'ajax',classe_conteudo:'tooltip-conteudo',classe_load:'tooltip-load',padding_top:0,padding_left:0,posicao:'',fixado:true,autoFix:true,evento:'mouseover',eventoFim:'mouseout',atributo:'rel',atributo_altura:'altura',atributo_largura:'largura',wrapper_tooltip:null,onInicia:null,onTermina:null};var o=$.extend(padrao,options);var tip=new Array();if(elem===undefined){elem=$(o.seletor);}
return elem.each(function(){var t=$(this);if(o.evento){t.bind(o.evento,function(e){return criaTooltip(t,e);});}
if(!o.fixado){t.mousemove(function(e){return posicionaTooltip(t,e);});}
if(o.eventoFim){t.bind(o.eventoFim,function(){return removeTooltip(t);});}});function criaTooltip(t,e){if($.isFunction(o.onInicia)){o.onInicia.apply(t);}
tip['conteudo']=t.attr(o.atributo),tip['largura']=t.attr(o.atributo_largura),tip['altura']=t.attr(o.atributo_altura),tip['continua']=true;if(o.atributo=='title'){t.attr('title','');}
tip['tip']=$('<div></div>').addClass(o.classe_conteudo).css({display:'none',position:'absolute',width:tip['largura'],height:tip['altura']});tip['load']=$('<div></div>').addClass(o.classe_load).css({display:'none',position:'fixed',left:0});if(tip['conteudo']!==undefined){if(t.hasClass(o.seletor_imagem)){tip['load'].appendTo('body').fadeIn();tip['load'].css({top:$(window).height()-tip['load'].outerHeight()});var img=new Image();$(img).load(function(){$(this).css({display:'none',height:this.height,width:this.width});if(tip['continua']){tip['tip'].html(this).wrapInner(o.wrapper_tooltip).appendTo('body').fadeIn('slow');tip['load'].remove();$(this).fadeIn();}
return posicionaTooltip(t,e);}).attr('src',tip['conteudo']);return false;}
if(t.hasClass(o.seletor_ajax)){tip['load'].appendTo('body').fadeIn();tip['load'].css({top:$(window).height()-tip['load'].outerHeight()});$.ajax({type:"POST",url:tip['conteudo'],success:function(data){if(tip['continua']){tip['tip'].html(data).wrapInner(o.wrapper_tooltip).appendTo('body').fadeIn('slow');tip['load'].fadeOut('fast',function(){$(this).remove();});};return posicionaTooltip(t,e);},error:function(){if(tip['continua']){tip['tip'].html("Ocorreu algum erro ou esta url n√£o existe...").wrapInner(o.wrapper_tooltip).appendTo('body').fadeIn('slow');tip['load'].fadeOut('fast',function(){$(this).remove();});}
return posicionaTooltip(t,e);}});return false;}
else{tip['tip'].html(tip['conteudo']).wrapInner(o.wrapper_tooltip).appendTo('body').fadeIn('slow');return posicionaTooltip(t,e);}}}
function removeTooltip(t){if($.isFunction(o.onTermina)){o.onTermina.apply(t);}
if(o.atributo=='title'){t.attr('title',tip['conteudo']);}
tip['continua']=false;tip['tip'].remove();$('.'+o.classe_conteudo).remove();tip['load'].remove();}
function posicionaTooltip(t,e){var ww=$(window).width(),wh=$(window).height(),wsl=$(window).scrollLeft(),wst=$(window).scrollTop(),w=t.outerWidth(),h=t.outerHeight(),pos=t.offset(),left=pos.left+o.padding_left,topo=pos.top+o.padding_top,tipw=tip['tip'].outerWidth(),tiph=tip['tip'].outerHeight();if(o.fixado){switch(o.posicao){case'top1':var posY=topo-tiph-5,posX=left-tipw;break;case'top2':var posY=topo-tiph-5,posX=left+(w/2)-(tipw/2);break;case'top3':var posY=topo-tiph-5,posX=left+w;break;case'top4':var posY=topo-tiph-5,posX=left;break;case'top5':var posY=topo-tiph-5,posX=left-tipw+w;break;case'esquerda':var posY=topo-(tiph/2)+(h/2),posX=left-tipw-5;break;case'direita':var posY=topo-(tiph/2)+(h/2),posX=left+w+5;break;case'rod1':var posY=topo+h+5,posX=left-tipw;break;case'rod2':var posY=topo+h+5,posX=left+(w/2)-(tipw/2);break;case'rod3':var posY=topo+h+5,posX=left+w;break;case'rod4':var posY=topo+h+5,posX=left;break;case'rod5':var posY=topo+h+5,posX=left-tipw+w;break;default:var posY=topo-tiph-15,posX=left+(w/2)-(tipw/2);break;}}
else{if((e.pageY-tiph-wst-15)<=0){var posY=e.pageY+15;}else{var posY=e.pageY-tiph-15;}
if((ww+wsl-e.pageX)<=tipw){var posX=e.pageX-tipw-15;}else{var posX=e.pageX+15;}}
tip['tip'].css({'top':posY,'left':posX});if(o.fixado&&o.autoFix){if(o.posicao=='top1'||o.posicao=='top5'||o.posicao=='rod1'||o.posicao=='rod5'){if(left<=(tipw+30)){tip['tip'].css({'left':left});}}
if(o.posicao=='top3'||o.posicao=='top4'||o.posicao=='rod3'||o.posicao=='rod4'){if(ww<=(left+tipw+30)){tip['tip'].css({'left':left-tipw+w});}}
if(o.posicao=='top2'||o.posicao=='rod2'){if(left<=(tipw/2+30)){tip['tip'].css({'left':left});}
if(ww<=(left+tipw/2+30)){tip['tip'].css({'left':left-tipw+w});}}
if(o.posicao=='esquerda'){if(left<=(tipw+30)){tip['tip'].css({'left':left+w+5});}}
if(o.posicao=='direita'){if(ww<=(left+tipw+30)){tip['tip'].css({'left':left-tipw});}}
if(o.posicao=='direita'||o.posicao=='esquerda'){if((wst+wh)<=(topo+tiph/2+10)){tip['tip'].css({'top':topo-tiph-5});}
if((topo-wst)<(tiph/2+10)){tip['tip'].css({'top':topo+h+5});}}else{if((wst+wh)<=(topo+tiph+10)){tip['tip'].css({'top':topo-tiph-5});}
if((topo-wst)<(tiph+10)){tip['tip'].css({'top':topo+h+5});}}}
e.preventDefault();}};})(jQuery);
